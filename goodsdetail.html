<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap 5 JS (包含 Popper.js) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Pacifico&family=Playfair+Display:wght@600&display=swap"
        rel="stylesheet">

    <div id="navbar-placeholder"></div>
    <style>
        .item img {
            width: 100%;
            /* 圖片寬度 */
            /* height: 90vh;
            高度自動 */
            padding-top: 30px;

            object-fit: cover;
        }

        .btn-circle {
            width: 500px;
            height: 10px;
            border-radius: 15px;
            padding: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        /* #productSize input[type="radio"]{
            transform: scaleX(1.5);
        } */
    </style>
    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-placeholder').innerHTML = data;
                updateCartCount();
            });




        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');
        const products = {
            1: {
                name: "女裝 兩件式大衣(格紋)",
                price: 999,
                image: "./1.jpg",
                description: `商品材質:64%聚酯纖維28%嫘縈8%聚丙烯腈纖維,襯裡:100%聚酯纖維`,


            },
            2: {
                name: "女裝 菱格壓紋外套(格紋)",
                price: 999,
                image: "./2.jpg",
                description: `商品材質:大身:面料68%聚酯纖維回收聚酯纖維31%嫘縈1%彈性纖維,襯裡:100%聚酯纖維回收聚酯纖維,填充物:100%聚酯纖維,羅紋部分:96%聚酯纖維4%彈性纖維`,
            },
            3: {
                name: "女裝 背心拼接襯衫",
                price: 999,
                image: "./3.jpg",
                description: `商品材質:內側:53%聚酯纖維(回收聚酯纖維)22%嫘縈19%聚酯纖維6%彈性纖維;外側:大身:53%聚酯纖維(回收聚酯纖維)22%嫘縈19%聚酯纖維6%彈性纖維,襯裡:100%聚酯纖維(回收聚酯纖維)`,
            },
            4: {
                name: "女裝 挖肩開襟外套",
                price: 999,
                image: "./4.jpg",
                description: `商品材質:83%尼龍17%聚丙烯腈纖維`,
            },
            5: {
                name: "女裝 兩件式裙褲組(格紋)",
                price: 999,
                image: "./5 .jpg",
                description: `商品材質:裙子部分:69%聚酯纖維(回收聚酯纖維)30%嫘縈1%彈性纖維,褲子部分:69%聚酯纖維(回收聚酯纖維)30%嫘縈1%彈性纖維`,
            },
            6: {
                name: "女裝 牛仔褲",
                price: 999,
                image: "./6.jpg",
                description: `商品材質92%棉7%聚酯纖維1%彈性纖維`,
            }
        };

        // 獲取對應的商品資料
        const product = products[productId];

        // 如果商品存在，顯示商品資訊
        if (product) {
            document.addEventListener("DOMContentLoaded", () => {
                document.getElementById('productName').innerText = product.name;
                document.getElementById('productImage').src = product.image;
                document.getElementById('productPrice').innerText = `價格: $${product.price}`;
                document.getElementById('productDescription').innerText = product.description;

            });
        } else {
            console.error('商品不存在');
        }
    </script>
</head>

<body class="container-fluid" style="padding-top: 130px;">



    <div class="container-fluid">
        <div class="row">
            <!-- 左側圖片 -->
            <div class="col-12 col-md-6 item" style="height: 90vh;">
                <img src="./1.jpg" alt="Clothes" style="height: 100%;object-fit: contain; " id="productImage">
            </div>

            <!-- 右側產品資訊 -->
            <div class="col-12 col-md-6 item d-flex align-items-start flex-column" style="height: 85vh; padding: 30px;">
                <h1 id="productName" class="mb-1" style="font-weight: bold;"></h1>
                <hr class="w-100">

                <h5 id="productDescription" class="mb-4">商品介紹</h5>

                <!-- 顏色選擇 -->
                <h2 class="mb-3 mt-4"style="font-weight: bold;">顏色</h2>
                <div class="mb-4" id="colorChoice">
                    <input type="radio" name="color" id="color1" style="transform: scale(1.5); " value="紅色">
                    <label for="color1" style="font-size: 1.5rem;">紅色</label>
                    <input type="radio" name="color" id="color2" style="transform: scale(1.5); margin-left: 30px;"
                        value="藍色">
                    <label for="color2" style="font-size: 1.5rem; ">藍色</label>
                </div>

                <!-- 尺寸選擇 -->
                <h2 class="mb-3 mt-4"style="font-weight: bold;">尺寸</h2>
                <div id="productSize" class="mb-4">
                    <input type="radio" name="size" value="S" id="size1" style="transform: scale(1.5); ">
                    <label for="size1" style="font-size: 1.5rem;">S</label>
                    <input type="radio" name="size" value="S" id="size2"
                        style="transform: scale(1.5); margin-left: 30px;">
                    <label for="size2" style="font-size: 1.5rem;">M</label>
                    <input type="radio" name="size" value="S" id="size3"
                        style="transform: scale(1.5);margin-left: 30px; ">
                    <label for="size3" style="font-size: 1.5rem;">L</label>
                    <input type="radio" name="size" value="S" id="size4"
                        style="transform: scale(1.5); margin-left: 30px;">
                    <label for="size4" style="font-size: 1.5rem;">XL</label>

                </div>

                <!-- 價格 -->
                <h2 id="productPrice" class="mb-4 mt-4"style="font-weight: bold;"></h2>

                <!-- 數量選擇 -->
                <h2 class="mb-2 mt-4"style="font-weight: bold;">數量</h2>
                <select class="form-select mb-5" id="categorySelect" aria-label="選擇商品類別">
                    <option selected>請選擇數量</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>

                <!-- 加入購物車按鈕 -->
                <button id="addToCartBtn" class="btn btn-dark btn-shadow w-100 mt-4">加入購物車</button>
            </div>
        </div>
    </div>


    <script src="cart.js"></script>
    <script>


        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const uniqueItems = new Set();

            cart.forEach(item => {
                // 使用唯一的 key 組合來確保每個商品都是唯一的
                const uniqueKey = `${item.name}-${item.color}-${item.size}`;
                uniqueItems.add(uniqueKey); // 將唯一的 key 加入 Set
            });

            const totalItems = uniqueItems.size; // 獲取唯一商品的數量
            const cartCountElement = document.getElementById('cartCount');
            cartCountElement.innerText = totalItems;
            // 如果購物車為空，不顯示數字
            if (totalItems === 0) {
                cartCountElement.classList.add('d-none');
            } else {
                cartCountElement.classList.remove('d-none');
            }


        }
        
        

        document.getElementById('addToCartBtn').addEventListener('click', () => {
            if (document.querySelector('input[name="color"]:checked')?.value && document.querySelector('input[name="size"]:checked')?.value &&document.getElementById('categorySelect').value) {

                const selectedQuantity = document.getElementById('categorySelect').value; // 獲取選擇的數量
                const itemName = document.getElementById('productName').innerText = product.name; // 商品名稱
                const itemUnitPrice = product.price;
                const itemPrice = itemUnitPrice * selectedQuantity;
                // document.getElementById('productPrice').innerHTML = `價格: $${product.price}`; // 商品價格，這裡可以根據實際情況改變
                const itemImage = document.getElementById('productImage').src = product.image; // 商品圖片路徑
                const itemColor = document.querySelector('input[name="color"]:checked')?.value ;
                const itemSize = document.querySelector('input[name="size"]:checked')?.nextElementSibling.textContent ; // 用戶選擇的尺寸

                // 將商品添加到購物車
                addToCart({
                    name: itemName,
                    quantity: parseInt(selectedQuantity),
                    unitPrice: itemUnitPrice,
                    price: itemPrice, // 根據選擇的數量計算價格
                    image: itemImage,
                    color: itemColor,
                    size: itemSize,
                });
            }else{
                alert('請選擇顏色尺寸數量');
                
            }
        });



    </script>

</body>

</html>