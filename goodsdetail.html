<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap 5 JS (包含 Popper.js) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


    <div id="navbar-placeholder"></div>
    <style>
        .item img {
            width: 50vw;
            /* 圖片寬度 */
            height: 90vh;
            /* 高度自動 */
            padding-top: 30px;

            object-fit: cover;
        }
    </style>
    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-placeholder').innerHTML = data;
                updateCartCount();
            });




        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');
        const products = {
            1: {
                name: "商品名稱1",
                price: 200,
                image: "./2.jpg",
                description: "這是商品1的詳細介紹。",


            },
            2: {
                name: "商品名稱2",
                price: 300,
                image: "./8.jpg",
                description: "這是商品2的詳細介紹。"
            },
            // 您可以在這裡繼續添加更多商品
        };

        // 獲取對應的商品資料
        const product = products[productId];

        // 如果商品存在，顯示商品資訊
        if (product) {
            document.addEventListener("DOMContentLoaded", () => {
                document.getElementById('productName').innerText = product.name;
                document.getElementById('productImage').src = product.image;
                document.getElementById('productPrice').innerText = `價格: $${product.price}`;
                document.getElementById('productDescription').innerText = product.description;

            });
        } else {
            console.error('商品不存在');
        }
    </script>
</head>

<body style="padding-top: 70px;">



    <div class="container-fluid">
        <div class="row">
            <div class="col-12 col-md-6 item ">
                <img src="./8.jpg" alt="Clothes" style="width: 100%;" id="productImage">

            </div>
            <div class="col-12 col-md-6 item ">
                <br>
                <h1 id="productName"></h1>
                <h5 id="productDescription">商品介紹</h5>
                <br>
                <h2 id="productPrice"></h2>
                <br>
                <br>
                <h2>顏色</h2>
                <input type="radio" name="color" id="color1" value="紅色">
                <label for="color1">紅色</label>
                <input type="radio" name="color" id="color2" value="藍色">
                <label for="color2">藍色</label>
                <h2>尺寸</h2>
                <div id="productSize">
                    <input type="radio" name="size">S
                    <input type="radio" name="size">M
                    <input type="radio" name="size">L
                    <input type="radio" name="size">XL
                </div>

                <h2>數量</h2>
                <select class="form-select" id="categorySelect" aria-label="選擇商品類別">
                    <option selected>請選擇數量</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
                <br>
                <br>
                <br>
                <button id="addToCartBtn">加入購物車</button>
            </div>

        </div>
    </div>
    <script src="cart.js"></script>
    <script>


        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const uniqueItems = new Set();

            cart.forEach(item => {
                // 使用唯一的 key 組合來確保每個商品都是唯一的
                const uniqueKey = `${item.name}-${item.color}-${item.size}`;
                uniqueItems.add(uniqueKey); // 將唯一的 key 加入 Set
            });

            const totalItems = uniqueItems.size; // 獲取唯一商品的數量
            const cartCountElement = document.getElementById('cartCount');
            cartCountElement.innerText = totalItems;
            // 如果購物車為空，不顯示數字
            if (totalItems === 0) {
                cartCountElement.classList.add('d-none');
            } else {
                cartCountElement.classList.remove('d-none');
            }


        }

        document.getElementById('addToCartBtn').addEventListener('click', () => {
            // ocument.getElementById('productName').innerText = product.name;
            //     document.getElementById('productImage').src = product.image;
            //     document.getElementById('productPrice').innerText = `價格: $${product.price}`;
            //     document.getElementById('productDescription').innerText = product.description;
            const selectedQuantity = document.getElementById('categorySelect').value; // 獲取選擇的數量
            const itemName = document.getElementById('productName').innerText = product.name; // 商品名稱
            const itemPrice = product.price
            // document.getElementById('productPrice').innerHTML = `價格: $${product.price}`; // 商品價格，這裡可以根據實際情況改變
            const itemImage = document.getElementById('productImage').src = product.image; // 商品圖片路徑
            const itemColor = document.querySelector('input[name="color"]:checked')?.value || '無顏色';
            const itemSize = document.querySelector('input[name="size"]:checked')?.nextSibling.textContent || '無'; // 用戶選擇的尺寸

            // 將商品添加到購物車
            addToCart({
                name: itemName,
                quantity: selectedQuantity,
                price: itemPrice * selectedQuantity, // 根據選擇的數量計算價格
                image: itemImage,
                color: itemColor,
                size: itemSize
            });
        });



    </script>

</body>

</html>