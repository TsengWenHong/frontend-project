<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap 5 JS (包含 Popper.js) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <div id="navbar-placeholder"></div>
    <style>
        .carousel,
        .carousel-inner,
        .carousel-item,
        .carousel-item img {
            width: 100%;
            height: 100vh;
            /* 設定高度為視窗高度 */
        }
    </style>

    
    <script>
        fetch('header.html')
    .then(response => response.text())
    .then(data => {
        document.getElementById('navbar-placeholder').innerHTML = data;
        updateCartCount();
    });
        // fetch('header.html')
            // .then(function a(response) {
            //     return response.text();
            // })
            // .then(function b(data) {
            //     document.getElementById('navbar-placeholder').innerHTML = data;
            //     // 當縮放出現漢堡時，監聽點擊程序修改購物車是文字或圖案
            //     document.querySelector('.navbar-toggler').addEventListener('click', () => {
            //         const isExpanded = document.getElementById("Hamburger").getAttribute('aria-expanded');
            //         if (isExpanded === 'true') {
            //             document.getElementById('shoppingCart').innerHTML = '購物車';
            //         } else {
            //             document.getElementById('shoppingCart').innerHTML = `<i class="bi bi-cart-fill" style="font-size: 1.5rem;"></i>`;
            //         }
            //     });
            // });


    </script>
</head>

<body class=" text-white " style="padding-top: 56px;">

    <!-- 導覽列 -->


    <main>
        <div class="carousel slide " data-bs-ride="carousel" data-bs-interval="2000"
            style="position: fixed; right: 0 ;width: 75%; height: 100%" ;>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="img-fluid  w-100" src="https://dummyimage.com/1200x700/00ff5e/ffffff">
                </div>
                <div class="carousel-item">
                    <img class="img-fluid  w-100" src="https://dummyimage.com/1200x700/ff8400/ffffff">
                </div>
                <div class="carousel-item">
                    <img class="img-fluid  w-100" src="https://dummyimage.com/1200x700/f057c5/ffffff">
                </div>
            </div>

        </div>
    </main>
    <script src="cart.js"></script>
    <script>

        // fetch('header.html')
        //     .then(response => response.text())
        //     .then(data => {
        //         document.getElementById('navbar-placeholder').innerHTML = data;

        //         // 綁定點擊漢堡按鈕的事件
        //         document.querySelector('.navbar-toggler').addEventListener('click', updateShoppingCartIcon);

        //         // 在視窗大小改變時，檢查購物車狀態
        //         window.addEventListener('resize', updateShoppingCartIcon);

        //         // 初始化購物車圖示狀態
        //         updateShoppingCartIcon();
        //     });
        // // 檢查漢堡按鈕的展開狀態，並更新購物車圖示
        // function updateShoppingCartIcon() {
        //     const hamburgerButton = document.getElementById('Hamburger');
        //     const shoppingCart = document.getElementById('shoppingCart');

        //     if (!hamburgerButton || !shoppingCart) return; // 若元素不存在則跳出

        //     const isExpanded = hamburgerButton.getAttribute('aria-expanded') === 'true';
        //     const isMobileView = window.innerWidth < 992; // 判斷是否為小螢幕

        //     if (isMobileView && !isExpanded) {
        //         shoppingCart.innerHTML = '購物車';
        //     } else {
        //         shoppingCart.innerHTML = `<i class="bi bi-cart-fill" style="font-size: 1.5rem;"></i>`;
                
        //     }
        // }

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const uniqueItems = new Set();

            cart.forEach(item => {
                // 使用唯一的 key 組合來確保每個商品都是唯一的
                const uniqueKey = `${item.name}-${item.color}-${item.size}`;
                uniqueItems.add(uniqueKey); // 將唯一的 key 加入 Set
            });

            const totalItems = uniqueItems.size; // 獲取唯一商品的數量
            const cartCountElement = document.getElementById('cartCount');
            cartCountElement.innerText = totalItems;
            // 如果購物車為空，不顯示數字
            if (totalItems === 0) {
                cartCountElement.classList.add('d-none');
            } else {
                cartCountElement.classList.remove('d-none');
            }


        }

    </script>

</body>

</html>