<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shoppingcart</title>

    <div id="navbar-placeholder"></div>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap 5 JS (包含 Popper.js) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .item {
            text-align: center;
            /* 文字置中 */
            margin: 55px;
            /* 圖片間距 */
        }

        .item img {
            width: 200px;
            /* 圖片寬度 */
            height: auto;
            /* 高度自動 */
        }
    </style>
    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-placeholder').innerHTML = data;
            });

    </script>

</head>

<body style="padding-top: 70px;">
    <div class="container">
        <h1 class="mt-4">購物車</h1>
        <div id="cart" class="mt-3"></div>
        <h3 id="total" class="mt-4">總金額: $0</h3>
        <button class="btn btn-primary">結帳</button>
        <button class="btn btn-primary" id="clearCart">清空購物車</button>
    </div>

    <script>
        function displayCart() {
            const cartDiv = document.getElementById('cart');
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cartDiv.innerHTML = '';

            // cart.forEach((item, index) => {
            //     const div = document.createElement('div');
            //     div.className = 'cart-item';
            //     div.innerHTML = `
            //         <span><img src="${item.image}" style="width: 50px;"> ${item.name} ${item.color} ${item.size} $${item.price}</span>
            //         <button onclick="removeFromCart(${index})">刪除</button>
            //         <hr>`;
            //     cartDiv.appendChild(div);
            // });
            cart.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `
        <span><img src="${item.image}" style="width: 50px;"> ${item.name} 顏色:${item.color} 尺寸:${item.size}  數量:${item.quantity} $${item.price}</span>
        <button onclick="removeFromCart(${index})">刪除</button>
        <hr>`;
                cartDiv.appendChild(div);
            });

            updateTotal(cart);
        }

        function updateTotal(cart) {
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('total').innerText = `總金額: $${total}`;
        }

        function removeFromCart(index) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart)); // 更新 localStorage
            displayCart();
        }

        document.getElementById('clearCart').addEventListener('click', () => {
            localStorage.removeItem('cart'); // 清空 localStorage
            displayCart(); // 更新顯示
        });

        // 初始顯示購物車
        displayCart();
    </script>

    <!-- <div class="container-fluid ">
        <p style="text-align: center;">目前購物車沒有商品,</p>
        <a href="./goods.html" class="container-fluid btn  " style="color: cadetblue;">在逛一下</a>
    </div> -->

    <!-- var total = 所有的商品加起來>>>>一項商品的數量X價錢在加上其他商品的數量X價錢 -->
    <!-- 商品a的總價 一個按鈕去累加數量 數量在去乘上價錢 -->



</body>

</html>